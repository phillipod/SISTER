{% extends "base.html" %}

{% block title %}Submit Training Data{% endblock %}

{% block content %}
<section class="training-section">
    <h2>Build Screenshot Collection</h2>
    <p class="lead">Help improve SISTER by contributing your Star Trek Online build screenshots for training.</p>

    <div class="github-info">
        <p>SISTER is an open-source project. Visit our <a href="https://github.com/phillipod/SISTER" target="_blank" rel="noopener noreferrer">GitHub repository</a> to learn more about the project, download the latest release, or contribute.</p>
        <p>Current release: <a href="https://github.com/phillipod/SISTER/releases/tag/v2025.05.31-release" target="_blank" rel="noopener noreferrer">v2025.05.31</a></p>
    </div>

    <h3>How It Works</h3>
    <ol>
        <li>Upload screenshots for your builds (space and/or ground)</li>
        <li>Provide your email address</li>
        <li>Select which uses you consent to</li>
        <li>Receive a detailed consent form via email</li>
        <li>Reply to confirm your consent</li>
    </ol>

    <div class="screenshot-guide">
        <h3>Screenshot Guidelines</h3>
        <ul>
            <li>Take screenshots at full resolution (no downscaling)</li>
            <li>Ensure all UI elements are clearly visible</li>
            <li>Avoid overlapping windows or tooltips</li>
            <li>Include both space and ground builds if possible</li>
            <li>Multiple screenshots per build are allowed</li>
        </ul>
        <div class="tip">ðŸ’¡ Tip: You can add multiple builds using the "Add Another Build" button below.</div>
    </div>

    <form method="post" enctype="multipart/form-data" class="upload-form" id="uploadForm">
        {{ form.csrf_token }}
        
        <div class="form-section">
            <h3>Contact Information</h3>
            <div class="form-group">
                {{ form.email.label }}
                <div class="input-help">Your email is required for consent confirmation and will not be shared publicly.</div>
                {{ form.email(class="form-control", placeholder="your.email@example.com") }}
                {% if form.email.errors %}
                    <div class="errors">
                        {% for error in form.email.errors %}
                            <span class="error">{{ error }}</span>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>

        <div class="form-section">
            <h3>Consent Options</h3>
            <p class="consent-intro">You can select any combination of the following options, including none or all:</p>
            <div class="consent-group">
                <div class="consent-option">
                    {{ form.consent_ml_recognition(class="consent-checkbox") }}
                    <label class="consent-label">I consent to my screenshots being used to train SISTER's label recognition CNN (Convolutional Neural Network) for identifying labels (e.g, "Universal Consoles", "Fore Weapons", etc.)</label>
                </div>
                <div class="consent-option">
                    {{ form.consent_ml_future(class="consent-checkbox") }}
                    <label class="consent-label">I consent to my screenshots being used in future machine learning research and development beyond the current recognition system (e.g, build classification, icon recognition, etc.)</label>
                </div>
                <div class="consent-option">
                    {{ form.consent_test_suite(class="consent-checkbox") }}
                    <label class="consent-label">I consent to my screenshots being used as control samples in the pytest test suite. Note: Screenshots used in the test suite will NOT be used for ML training to maintain test integrity. Screenshots consented for both ML and test suite allocated to either ML training or test suite depending on data set requirements.</label>
                </div>
            </div>
        </div>

        <div id="buildsContainer">
            <div class="build-section" data-build-index="0">
                <div class="build-header">
                    <h3>Build Screenshots</h3>
                </div>
                <div class="screenshots-section">
                    <div class="build-type-selection">
                        <h4>Build Type</h4>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="build_type_0" value="space" checked>
                                Space Build
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="build_type_0" value="ground">
                                Ground Build
                            </label>
                        </div>
                    </div>
                    <div class="file-upload-section">
                        <h4>Screenshots</h4>
                        <input type="file" name="screenshots_0" multiple accept=".jpg,.jpeg,.png" class="file-input">
                    </div>
                </div>
            </div>
        </div>

        <button type="button" id="addBuildBtn" class="add-build-btn">
            Add Another Build
        </button>

        <div class="form-actions">
            <button type="submit" class="submit-btn">Submit Screenshots</button>
        </div>
    </form>

    <div class="privacy-section">
        <h3>Privacy &amp; Data Usage</h3>
        <p>Your privacy is important to us. Here's how we handle your data:</p>
        <ul>
            <li>Screenshots are only used for the purposes you consent to</li>
            <li>Screenshots will be published in public GitHub repositories</li>
            <li>Your email is only used for sending the consent form and will not be shared</li>
            <li>You can withdraw consent at any time by <a href="https://github.com/phillipod/SISTER/issues" target="_blank" rel="noopener noreferrer">creating an issue on GitHub</a></li>
            <li>Data usage is strictly limited to improving STO build analysis tools</li>
        </ul>
        <p>By submitting your screenshots, you'll receive an email with a detailed consent form. Your data will only be used after you reply to confirm your consent.</p>
    </div>
</main>

</section>

<script>
document.getElementById('addBuildBtn').addEventListener('click', function() {
    const container = document.getElementById('buildsContainer');
    const buildIndex = container.children.length;
    
    const buildSection = document.createElement('div');
    buildSection.className = 'build-section';
    buildSection.dataset.buildIndex = buildIndex;
    
    buildSection.innerHTML = `
        <div class="build-header">
            <h3>Additional Build</h3>
            <button type="button" class="remove-build-btn">Remove Build</button>
        </div>
        <div class="screenshots-section">
            <div class="build-type-selection">
                <h4>Build Type</h4>
                <div class="radio-group">
                    <label class="radio-option">
                        <input type="radio" name="build_type_${buildIndex}" value="space" checked>
                        Space Build
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="build_type_${buildIndex}" value="ground">
                        Ground Build
                    </label>
                </div>
            </div>
            <div class="file-upload-section">
                <h4>Screenshots</h4>
                <input type="file" name="screenshots_${buildIndex}" multiple accept=".jpg,.jpeg,.png" class="file-input">
            </div>
        </div>
    `;
    
    container.appendChild(buildSection);
    
    buildSection.querySelector('.remove-build-btn').addEventListener('click', function() {
        buildSection.remove();
    });
});
</script>
{% endblock %} 