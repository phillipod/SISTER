{% extends "base.html" %}

{% block title %}Training Data Statistics - SISTER{% endblock %}

{% block content %}
<div class="stats-page-container">
    <h1>Training Data Statistics</h1>
    <p class="stats-updated-time">Last updated: {{ now.strftime('%Y-%m-%d %H:%M:%S') }}</p>
    
    <section>
        <h2>Overview</h2>
        <div class="overview-grid">
            <div class="stat-card">
                <h3>Total Submissions</h3>
                <p class="count">{{ stats.total_submissions }}</p>
            </div>
            <div class="stat-card">
                <h3>Accepted Submissions</h3>
                <p class="count">{{ stats.total_accepted }}</p>
            </div>
            <div class="stat-card">
                <h3>Total Screenshots</h3>
                <p class="count">{{ stats.total_screenshots }}</p>
            </div>
        </div>
    </section>

    <div class="detail-sections-grid">
        <section class="detail-section">
            <h3>By Build Type</h3>
            <table class="stats-table">
                <thead>
                    <tr>
                        <th>Type</th>
                        <th>Total</th>
                        <th>Accepted</th>
                        <th>Progress (Target: {{ stats.target_per_type }})</th>
                    </tr>
                </thead>
                <tbody>
                    {% for type, data in stats.by_type.items() %}
                    <tr>
                        <td>{{ type|title }}</td>
                        <td>{{ data.total }}</td>
                        <td>{{ data.accepted }}</td>
                        <td>
                            <div class="custom-progress-container">
                                {% set progress = (data.accepted / stats.target_per_type * 100)|round|int %}
                                <div class="custom-progress-bar {% if progress >= 100 %}complete{% endif %}" 
                                     style="width: {{ progress }}%;">
                                    {{ progress }}%
                                </div>
                            </div>
                        </td>
                    </tr>
                    {% else %}
                    <tr><td colspan="4">No data by type.</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </section>

    </div>

    <div class="info-box">
        <h4>Target: {{ stats.target_per_type }} samples per label</h4>
        <p>We're aiming to collect at least {{ stats.target_per_type }} samples for each label to ensure good model performance.</p>
        <p>Special notes:
            <ul>
                <li>PC Ship builds have an additional "Secondary Deflector" label not always present.</li>
                <li>Ship builds have additional "Experimental Weapon" and "Hangar" labels not always present.</li>
            </ul>
        </p>
        <p><small>Once we have a reasonable collection of screenshots, this page will be updated with stats reflecting per-label per-platform counts, which we will run periodically.</small></p>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
{# Removed JavaScript for Bootstrap tabs as they are no longer used #}
{% endblock %}
